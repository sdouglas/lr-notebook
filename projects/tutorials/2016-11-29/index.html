<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" type="image/x-icon" href="../../../static/favicon.ico?h=e38ef9dd">
<link rel="stylesheet" href="../../../static/lib/normalize.css?h=ece571f3">
<link rel="stylesheet" href="../../../static/lib/skeleton.css?h=1fd77917">
<link rel="stylesheet" href="../../../static/style.css?h=5db9e889">
<link rel="stylesheet" href="../../../static/lib/medium-editor/medium-editor.min.css?h=17e98ac9">
<link rel="stylesheet" href="../../../static/fonts/anonymous-pro/anonymous-pro.css?h=7b3d4039">
<link rel="stylesheet" href="../../../static/fonts/fa/css/font-awesome.min.css?h=512c7d79">
<link rel="stylesheet" href="../../../static/fonts/ionicons/css/ionicons.min.css?h=f0459300">
<link rel="stylesheet" href="../../../static/fonts/source-sans-pro/source-sans-pro.css?h=eef2e813">

<!-- <script src="../../../static/lib/clipboard.min.js?h=64efc85d"></script> -->
<script src="../../../static/lib/jquery-2.2.1.min.js?h=7cb05e3d"></script>
<script src="../../../static/lib/marked.js?h=acaa528b"></script>
<script src="../../../static/lib/MooTools-Core-1.6.0.js?h=f829fe22"></script>
<script src="../../../static/lib/sprintf.js?h=f8d59971"></script>
<script src="../../../static/lib/medium-editor/medium-editor.min.js?h=d2c3e1bb"></script>
<script src="../../../static/lib/me-markdown.standalone.min.js?h=f8bd91a7"></script>
<script src="../../../static/lr-notebook.js?h=9fb07e66"></script>


<title></title>
<body>
  <header>
    <h1><i class="fa fa-sticky-note-o"></i> nb-sdouglas</h1>
    <nav>
      <ul class="nav navbar-nav">
        <li><a  href="../../../">Welcome</a></li>
        
          <li><a  class="active" href="../../../projects/">Projects</a></li>
        
          <li><a  href="../../../calendar/">Calendar</a></li>
        
          <li><a  href="../../../meetings/">Meetings</a></li>
        
          <li><a  href="../../../about/">About</a></li>
        
      </ul>
    </nav>
    
  </header>

  <iframe width="0" height="0" border="0" name="frame" style="border-style: none;"></iframe>

  <div class="page">
    
<h2 style="display: inline;"><a class="orange" href="../../../projects/tutorials/">tutorials/</a></h2><br>
<form target="frame" action="/admin/api/browsefs" method="post">
  <input type="hidden" name="path" value="/projects/tutorials/2016-11-29">
  <input type="image" src=../../../static/images/link.png>
</form>
<h2 class="lightblue" style="display: inline;">Rendering a cadnano model in Maya</h2> <span style="float:right;" class="midgray">2016-11-29</span> 
<hr>


<h5 style="float:left;">Attachments:</h5>


<div class="row">
  <div class="one column"></div>
  <div class="two columns"><!-- Attachments: --></div>
<div class="nine columns">
    
      
        <a href="../../../projects/tutorials/2016-11-29/amb_occ_layer.png"><img id="amb_occ_layer.png" draggable="true" ondragstart="drag(event)" ondragend="dragend(event)" src="../../../projects/tutorials/2016-11-29/amb_occ_layer@50x50.png"></a>
      
    
      
        <a href="../../../projects/tutorials/2016-11-29/composite1.png"><img id="composite1.png" draggable="true" ondragstart="drag(event)" ondragend="dragend(event)" src="../../../projects/tutorials/2016-11-29/composite1@50x50.png"></a>
      
    
      
        <a href="../../../projects/tutorials/2016-11-29/composite2.png"><img id="composite2.png" draggable="true" ondragstart="drag(event)" ondragend="dragend(event)" src="../../../projects/tutorials/2016-11-29/composite2@50x50.png"></a>
      
    
      
        <a href="../../../projects/tutorials/2016-11-29/final-invert.png"><img id="final-invert.png" draggable="true" ondragstart="drag(event)" ondragend="dragend(event)" src="../../../projects/tutorials/2016-11-29/final-invert@50x50.png"></a>
      
    
      
        <a href="../../../projects/tutorials/2016-11-29/final-textured.png"><img id="final-textured.png" draggable="true" ondragstart="drag(event)" ondragend="dragend(event)" src="../../../projects/tutorials/2016-11-29/final-textured@50x50.png"></a>
      
    
      
        <a href="../../../projects/tutorials/2016-11-29/final.png"><img id="final.png" draggable="true" ondragstart="drag(event)" ondragend="dragend(event)" src="../../../projects/tutorials/2016-11-29/final@50x50.png"></a>
      
    
      
        <a href="../../../projects/tutorials/2016-11-29/render-settings-ao.png"><img id="render-settings-ao.png" draggable="true" ondragstart="drag(event)" ondragend="dragend(event)" src="../../../projects/tutorials/2016-11-29/render-settings-ao@50x50.png"></a>
      
    
      
        <a href="../../../projects/tutorials/2016-11-29/render-settings-ss.png"><img id="render-settings-ss.png" draggable="true" ondragstart="drag(event)" ondragend="dragend(event)" src="../../../projects/tutorials/2016-11-29/render-settings-ss@50x50.png"></a>
      
    
      
        <a href="../../../projects/tutorials/2016-11-29/ss_toon_layer.png"><img id="ss_toon_layer.png" draggable="true" ondragstart="drag(event)" ondragend="dragend(event)" src="../../../projects/tutorials/2016-11-29/ss_toon_layer@50x50.png"></a>
      
    
    <br/>
    
        <a class="green" href="../../../projects/tutorials/2016-11-29/final.psd">final.psd</a>
        
  
  
  
  
  
  
  
  
  
  
  <i aria-hidden="true" class="fa fa-file-image-o"></i>
  
  
  
  
  
 
 
  
  
  

    
  </div>
</div>


<hr>






<div id="entry">
    <h2>Goal</h2>
<p>Here we want to create some publication-quality 3D renderings of DNA origami models built in cadnano. We use Maya 2012 with the cadnano2 plugin and Photoshop. This should also work with Maya 2015 and cadnano2.2. Some representative composited renders are shown to the right. The toon outline was omitted from the orange domain for comparison.</p>
<div class="right">
  <a href="composite1.png"><img class="thumb" src="composite1.png"></a>
  <a href="composite2.png"><img class="thumb" src="composite2.png"></a>
</div><h2>Basic Concepts</h2>
<p>This assumes basic familiarity with cadnano and the Maya interface.</p>
<p>To achieve the desired appearance, the rendering must be done as two separate passes, and then composited into a single image at the end of the process. Fortunately, it's possible to automate this for export into PSD layers which makes compositing very easy.</p>
<div class="right">
  |<a href="ss_toon_layer.png"><img class="thumb" src="ss_toon_layer.png"></a>|<a href="amb_occ_layer.png"><img class="thumb" src="amb_occ_layer.png"></a>|
  |:-:|:-:|
  |surface + toon outline|ambient occlusion|
</div><h2>Part 1: Create the geometry</h2>
<div class="right">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/Dl0YCOpgInA" frameborder="0" allowfullscreen></iframe>
</div><p>We're not creating anything fancy here, just a few separate origami shapes that we'll manipulate and arrange independently. The important step here is grouping and duplicating the objects created by cadnano so we can easily manipulate the geometry and shading without fighting with the code that's hooked up behind the scenes.</p>
<p>Sorry there is no audio for this first clip. It was meant to just be a record of a private demonstration in the lab. We didn't even realize we should record audio until the 2nd video. However, it's still good enough to give a basic idea of the workflow.</p>
<h2>Part 2: Set up shaders</h2>
<div class="right">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/v8DiTxbKET4" frameborder="0" allowfullscreen></iframe>
</div><p>Here we set up some surface shaders to give our models the desired color.</p>
<h2>Part 3: Toon Outline</h2>
<div class="right">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/EIFBUEICpvo" frameborder="0" allowfullscreen></iframe>
</div><p>This step is optional, but it's a nice effect that helps define the edges and seams of the object, and its  easy to add.</p>
<h2>Part 4: Render to PSD layers and composite</h2>
<div class="right">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/5Du0nr1Vy20" frameborder="0" allowfullscreen></iframe>
</div><p>Here we set up an ambient occlusion shader on its own render layer.  We then configure the render settings so the separate render layers will each be saved to its own layer in a layered Photoshop PSD file. We can then easily composite the two layers (by multiplying the ao layer on top of the ss layer) for the final desired appearance.</p>
<h3>Render settings</h3>
<p>Here are screenshots of the render settings windows in case they are hard to see in the videos.</p>
<div class="right">
  <a href="render-settings-ss.png"><img class="thumb" src="render-settings-ss.png"></a>
  <a href="render-settings-ao.png"><img class="thumb" src="render-settings-ao.png"></a>
</div><h2>Conclusion</h2>
<p>Many additional effects can be achieved in Photoshop by applying filters or adjustments to the layers.</p>
<p><a href="final-invert.png"><img class="bigthumb" src="final-invert.png"></a><br></p>
<div class="right">
  <a href="final-textured.png"><img class="bigthumb" src="final-textured.png"></a>
</div><h2>References</h2>
<p>If you are interested in learning about 3D rendering, I highly recommend Jeremy Birn's <a href="https://www.amazon.com/Digital-Lighting-Rendering-Voices-Matter/dp/0321928989">Digital Lighting and Rendering</a>. It is relatively platform agnostic and focuses on concepts.</p>
<div class="right">
  <a target="_new" href="https://www.amazon.com/Digital-Lighting-Rendering-Voices-Matter/dp/0321928989"><img class="littlethumb" src="birn-dlr.png"></a><br>
</div>
</div>


  <h5 style="float:left; padding-bottom:3rem;">Subfolders:</h5>
  
  
    
    
    <div class="row">
      <div class="two columns">
        <small>
        <a style="margin-left:2rem" href="../../../projects/tutorials/2016-11-29/tmp/">&boxur; <span class="orange2">tmp/</span></a></small><br/>
      </div>
      <div class="one column">
        <form style="display:inline;" target="frame" action="/admin/api/browsefs" method="post">
        <input type="hidden" name="path" value="/projects/tutorials/2016-11-29/tmp">
        <input type="image" src=../../../static/images/sublink.png>
        </form>
      </div>
      <div class="four columns"> <!-- attachments -->
      
          
          &nbsp;
        </div>
        <div class="two columns">&nbsp;
        
  
  
    
  
  
    
    
    
  
    
    
    
  
    
    
    
  
  
    
  
  
  
  
  
  
  
  
  
  
  <i aria-hidden="true" class="fa fa-file-image-o"></i>
  
  
  
  
  
 
 
  
  
  
<span class="green">.psd</span><span class="lightgray">(3)</span>
  

        </div>
      
      </div> <!-- five columns -->
    </div> <!-- row -->
    
    






<pre style="display:none;" class="markdown"></pre>

<script>
  function renderRightAsMarkdown() {
      var right = document.getElementsByClassName("right");
      for (var i=0; i<right.length; i++) {
          src = right[i].innerHTML
          right[i].innerHTML = marked(src);
      }
  }
  renderRightAsMarkdown();
</script>




<script>

// Disable clipboard stuff for now
// var pre = document.getElementsByTagName('pre');
// for (var i = 0; i < pre.length; i++) {
//   var button = document.createElement('button');
//   button.className = 'btn fa fa-copy';
//   pre[i].appendChild(button);
// }

// var clipboard = new Clipboard('.btn', {
//   target: function(trigger) {return trigger.previousElementSibling;}
// });

// function showSuccess(elem){elem.setAttribute('class','btn fa fa-check');}
// function sleep (time) {return new Promise((resolve) => setTimeout(resolve, time));}
// clipboard.on('success',function(e){
//   showSuccess(e.trigger);
//   sleep(350).then(() => {e.clearSelection();
//     e.trigger.setAttribute('class','btn fa fa-copy');})
// });

// Experimental direct editing

// var paragraphs = $$("#entry>p");
// var lastEl = paragraphs.getLast();
// var path = '/projects/tutorials/2016-11-29';

// paragraphs.each(function(el) {
//   var dropArea = new Element('div', {'class':'right droparea',
//                                      'ondrop':'drop(event, path)',
//                                      'ondragover':'dragover_handler(event)'
//                                      });
//   var next = el.getNext();
//   if (!!next && !next.hasClass('right')) {
//     droptext = new Element('div', {'id':'targetString',
//                                    styles:{display: 'none'},
//                                    'html':el.get('html')
//                                   });
//     droptext.inject(dropArea);
//     dropArea.inject(el, 'after');
//   }
// });

// var rightimgs = $$("img.thumb");
// rightimgs.each(function(el) {
//   var button = document.createElement('button');
//   button.className = 'btn fa fa-window-close';
//   el.appendChild(button);
// });

// var markDownEl = document.querySelector(".markdown");

// new MediumEditor($$("#entry>p"), {
//     extensions: {markdown: new MeMarkdown(function (md) {markDownEl.textContent = md;})},
//     toolbar: {
//       allowMultiParagraphSelection: false,
//       buttons: ['bold', 'italic', 'underline']
//     },
//     disableReturn: true,
//     disableDoubleReturn: true,
//     disableExtraSpaces: true,
//     paste: {
//         forcePlainText: true,
//         cleanPastedHTML: true
//     }
// });

</script>

<a href="slides" id="play-slides-link"><i class="fa fa-play" aria-hidden="true"></i></a>


  </div>

  <footer>
    &copy; 2016. Made with <a target="_new" href="http://bionano.ucsf.edu/"><i class="fa fa-gamepad"></i></a> in SF.
  </footer>

</body>
