<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" type="image/x-icon" href="../../../static/favicon.ico?h=e38ef9dd">
<link rel="stylesheet" href="../../../static/normalize.css?h=ece571f3">
<link rel="stylesheet" href="../../../static/skeleton.css?h=eef777a0">
<link rel="stylesheet" href="../../../static/style.css?h=9b0ede05">
<link rel="stylesheet" href="../../../static/fonts/anonymous-pro/anonymous-pro.css?h=7b3d4039">
<link rel="stylesheet" href="../../../static/fonts/fa/css/font-awesome.min.css?h=6f794d3b">
<link rel="stylesheet" href="../../../static/fonts/ionicons/css/ionicons.min.css?h=f0459300">
<link rel="stylesheet" href="../../../static/fonts/source-sans-pro/source-sans-pro.css?h=eef2e813">
<link rel="stylesheet" href="../../../static/pygments.css">
<script src="../../../static/js/jquery-2.2.1.min.js?h=7cb05e3d"></script>
<script src="../../../static/js/lr-notebook.js?h=1ff40b5a"></script>
<script src="../../../static/js/marked.js?h=acaa528b"></script>

<title></title>
<body>
  <header>
    <h1><i class="fa fa-sticky-note-o"></i> nb-sdouglas</h1>
    <nav>
      <ul class="nav navbar-nav">
        <li><a  href="../../../">Welcome</a></li>
        
          <li><a  class="active" href="../../../projects/">Projects</a></li>
        
          <li><a  href="../../../calendar/">Calendar</a></li>
        
          <li><a  href="../../../about/">About</a></li>
        
      </ul>
    </nav>
    
  </header>

  <iframe width="0" height="0" border="0" name="frame" style="border-style: none;"></iframe>

  <div class="page">
    
<h1 style="display: inline;"><a class="orange" href="../../../projects/lr-notebook/">lr-notebook/</a></h1>
<br>
<form target="frame" action="/admin/api/browsefs" method="post">
  <input type="hidden" name="path" value="/projects/lr-notebook/2016-02-01">
  <input type="image" src=../../../static/images/link.png>
</form>
<h2 class="lightblue" style="display: inline;">Enable links to filesystem</h2> <span class="midgray">2016-02-01</span> 


<div id="entry">
    <h1>Markdown syntax highlighting.</h1>
<ul>
<li>Installed: <a href="https://github.com/lektor/lektor-markdown-highlighter">https://github.com/lektor/lektor-markdown-highlighter</a></li>
<li>Style gallery: <a href="https://help.farbox.com/pygments.html">https://help.farbox.com/pygments.html</a></li>
</ul>
<h1>Auto-generated Notebook Templates</h1>
<p>It is useful to pre-populate the contents folders with default <code>contents.lr</code>
files for the year. The script below create the appropriate folder structure,
and fill in default values for pub_date, author, etc.</p>
<p>Link to file: <a href="make_lektor_templates.py">make_lektor_templates.py</a></p>
<div class="right">

```python
#!/usr/bin/python

import calendar
import getopt, os, sys

def main():
    try:
        opts, args = getopt.getopt(sys.argv[1:],
            'u:y:h', ['user=', 'year=', 'help'])
    except getopt.GetoptError:
        usage()
        sys.exit(2)

    for opt, arg in opts:
        if opt in ('-h', '--help'):
            usage()
            sys.exit(2)
        elif opt in ('-u', '--user'):
            user = arg
        elif opt in ('-y', '--year'):
            year = arg
        else:
            usage()
            sys.exit(2)

    cal = calendar.Calendar()

    for month in range(1,13):
        month_str = '%02d'%month
        for day in range(1,1+calendar.monthrange(int(year),month)[1]):
            day_str = '%02d'%day
            path = "/".join([year,month_str,day_str])
            os.makedirs(path)
            with open(path+'/contents.lr', 'w+') as f:
                f.write(lektor_day_template %
                    (day_str, '%s-%s-%s' % (year, month_str, day_str)))
        month_path = "/".join([year,month_str,'contents.lr'])
        with open(month_path, 'w+') as f:
            f.write(lektor_month_template %
                (month_str, calendar.month_name[month],
                            calendar.month_abbr[month]))
    with open(year+'/contents.lr', 'w+') as f:
        f.write(lektor_year_template % (year,year))

usage_str = """Usage:
    python foo.py -u author -y year
    python foo.py --user author --year year"""

def usage():
    print(usage_str)


lektor_year_template = """_model: year
---
name: %s
---
label: %s
"""

lektor_month_template = """title: %s
---
description: %s
---
label: %s
"""

lektor_day_template = """_hidden: yes
---
title: %s
---
author: sdouglas
---
pub_date: %s
---
categories:
---
description:
---
body:

"""

if __name__ == "__main__":
    main()
```
</div>
</div>

<script>
  function renderRightAsMarkdown() {
      var right = document.getElementsByClassName("right");
      for (var i=0; i<right.length; i++) {
          src = right[i].innerHTML
          right[i].innerHTML = marked(src);
      }
  }
  renderRightAsMarkdown();
</script>




<hr>
<h5 style="float:left; margin-top:3rem;">Attachments:</h5>
  

<div class="row">
  <div class="one column"></div>
  <div class="two columns"><!-- Attachments: --></div>
<div class="nine columns">
    
    
    
        <a class="green" href="../../../projects/lr-notebook/2016-02-01/make_lektor_templates.py">make_lektor_templates.py</a>
        
   
  
 
  
  
 
  
  

  
  
   <i aria-hidden="true" class="icon ion-social-python"></i>
  
  
  
  
 
 
  
  
  

    
  </div>
</div>








  </div>

  <footer>
    &copy; 2016. Made with <a target="_new" href="http://bionano.ucsf.edu/"><i class="fa fa-flask"></i></a> in SF.

  </footer>
</body>
