<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" type="image/x-icon" href="../../../../../static/favicon.ico?h=e38ef9dd">
<link rel="stylesheet" href="../../../../../static/normalize.css?h=ece571f3">
<link rel="stylesheet" href="../../../../../static/skeleton.css?h=e1126a5f">
<link rel="stylesheet" href="../../../../../static/style.css?h=889665ec">
<link rel="stylesheet" href="../../../../../static/fonts/anonymous-pro/anonymous-pro.css?h=7b3d4039">
<link rel="stylesheet" href="../../../../../static/fonts/fa/css/font-awesome.min.css?h=12d68610">
<link rel="stylesheet" href="../../../../../static/fonts/ionicons/css/ionicons.min.css?h=f0459300">
<link rel="stylesheet" href="../../../../../static/fonts/source-sans-pro/source-sans-pro.css?h=eef2e813">
<link rel="stylesheet" href="../../../../../static/pygments.css">
<script src="../../../../../static/js/jquery-2.2.1.min.js?h=7cb05e3d"></script>

<title></title>
<body>
  <header>
    <h1><i class="fa fa-sticky-note-o"></i> nb-sdouglas</h1>
    <nav>
      <ul class="nav navbar-nav">
        <li><a  href="../../../../../">Welcome</a></li>
        
          <li><a  class="active" href="../../../../../log/">Log</a></li>
        
          <li><a  href="../../../../../folders/">Folders</a></li>
        
          <li><a  href="../../../../../about/">About</a></li>
        
      </ul>
    </nav>
    
  </header>

  <iframe width="0" height="0" border="0" name="frame" style="border-style: none;"></iframe>

  <div class="page">
    

<iframe width="0" height="0" border="0" name="frame" style="border-style: none;"></iframe>


<div class="calendar row">
  <div class="eight columns">
    <a  href="../../../../../log/2007/">2007
    </a>
   
    
      <a class="nochildren" href="../../../../../log/2007/01/">Jan</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2007/02/">Feb</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2007/03/">Mar</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2007/04/">Apr</a>
    
   
    
      <a href="../../../../../log/2007/05/">May</a>
    
   
    
      <a href="../../../../../log/2007/06/">Jun</a>
    
   
    
      <a href="../../../../../log/2007/07/">Jul</a>
    
   
    
      <a class="active" href="../../../../../log/2007/08/">Aug</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2007/09/">Sep</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2007/10/">Oct</a>
    
   
    
      <a href="../../../../../log/2007/11/">Nov</a>
    
   
    
      <a href="../../../../../log/2007/12/">Dec</a>
    
  
</div>
</div>

<div class="calendar row">
  <div class="eight columns">
    <a  href="../../../../../log/2008/">2008
    </a>
   
    
      <a href="../../../../../log/2008/01/">Jan</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2008/02/">Feb</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2008/03/">Mar</a>
    
   
    
      <a href="../../../../../log/2008/04/">Apr</a>
    
   
    
      <a href="../../../../../log/2008/05/">May</a>
    
   
    
      <a href="../../../../../log/2008/06/">Jun</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2008/07/">Jul</a>
    
   
    
      <a href="../../../../../log/2008/08/">Aug</a>
    
   
    
      <a href="../../../../../log/2008/09/">Sep</a>
    
   
    
      <a href="../../../../../log/2008/10/">Oct</a>
    
   
    
      <a href="../../../../../log/2008/11/">Nov</a>
    
   
    
      <a href="../../../../../log/2008/12/">Dec</a>
    
  
</div>
</div>

<div class="calendar row">
  <div class="eight columns">
    <a  href="../../../../../log/2016/">2016
    </a>
   
    
      <a href="../../../../../log/2016/01/">Jan</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2016/02/">Feb</a>
    
   
    
      <a href="../../../../../log/2016/03/">Mar</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2016/04/">Apr</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2016/05/">May</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2016/06/">Jun</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2016/07/">Jul</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2016/08/">Aug</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2016/09/">Sep</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2016/10/">Oct</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2016/11/">Nov</a>
    
   
    
      <a class="nochildren" href="../../../../../log/2016/12/">Dec</a>
    
  
</div>
</div>


<div class="row">
  <div class="ten columns">
   <span class="days">2007-Aug</a></span>
   &nbsp;
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/01">
    <input class="hidden-button-link" type="submit" value="1">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/02">
    <input class="hidden-button-link" type="submit" value="2">
  </form> 

      
    
      
       
  <a  href="../../../../../log/2007/08/03/">3</a> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/04">
    <input class="hidden-button-link" type="submit" value="4">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/05">
    <input class="hidden-button-link" type="submit" value="5">
  </form> 

      
    
      
       
  <a  href="../../../../../log/2007/08/06/">6</a> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/07">
    <input class="hidden-button-link" type="submit" value="7">
  </form> 

      
    
      
       
  <a class="active" href="../../../../../log/2007/08/08/">8</a> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/09">
    <input class="hidden-button-link" type="submit" value="9">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/10">
    <input class="hidden-button-link" type="submit" value="10">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/11">
    <input class="hidden-button-link" type="submit" value="11">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/12">
    <input class="hidden-button-link" type="submit" value="12">
  </form> 

      
    
      
       
  <a  href="../../../../../log/2007/08/13/">13</a> 

      
    
      
       
  <a  href="../../../../../log/2007/08/14/">14</a> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/15">
    <input class="hidden-button-link" type="submit" value="15">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/16">
    <input class="hidden-button-link" type="submit" value="16">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/17">
    <input class="hidden-button-link" type="submit" value="17">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/18">
    <input class="hidden-button-link" type="submit" value="18">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/19">
    <input class="hidden-button-link" type="submit" value="19">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/20">
    <input class="hidden-button-link" type="submit" value="20">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/21">
    <input class="hidden-button-link" type="submit" value="21">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/22">
    <input class="hidden-button-link" type="submit" value="22">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/23">
    <input class="hidden-button-link" type="submit" value="23">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/24">
    <input class="hidden-button-link" type="submit" value="24">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/25">
    <input class="hidden-button-link" type="submit" value="25">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/26">
    <input class="hidden-button-link" type="submit" value="26">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/27">
    <input class="hidden-button-link" type="submit" value="27">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/28">
    <input class="hidden-button-link" type="submit" value="28">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/29">
    <input class="hidden-button-link" type="submit" value="29">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/30">
    <input class="hidden-button-link" type="submit" value="30">
  </form> 

      
    
      
        
  <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/31">
    <input class="hidden-button-link" type="submit" value="31">
  </form> 

      
    
  </div>
</div>

<h5><a href="../../../../../log/2007/08/08/">Aug 08,2007</a> 
  
    <a href="../../../../../log/2007/08/08/cadnano/" class="orange">cadnano/</a>
  
</h5>



<div class="project-entry">
  <h2>
  <div class="row"> <!-- date,author,title row -->
    <div class="ten columns"> <!-- description -->
      
        a bit of a drag
      
    </div>
    <div class="two columns"> <!-- reveal in finder -->

    <form target="frame" action="/admin/api/browsefs" method="post">
    <input type="hidden" name="path" value="/log/2007/08-Aug/08/cadnano">
    <input class="button-primary" type="submit" value="cadnano">

    </div> 
  </div> <!-- end date,author,title row -->

   <!-- log-entry page shows full body contents  -->
    </h2>
    <hr>
    <div class="highlight"><pre><span></span><span class="kd">package</span>
<span class="p">{</span>
    <span class="kd">import</span> <span class="nx">flash</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="o">*;</span>
    <span class="kd">import</span> <span class="nx">flash</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="o">*;</span>
    <span class="kd">import</span> <span class="nx">fl</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">SliderEvent</span><span class="o">;</span>
    <span class="kd">import</span> <span class="nx">flash</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="o">*;</span>
    <span class="kd">import</span> <span class="nx">flash</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nb">Keyboard</span><span class="o">;</span>
    <span class="kd">import</span> <span class="nx">flash</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nb">Timer</span><span class="o">;</span>
    <span class="kd">import</span> <span class="nx">de</span><span class="p">.</span><span class="nx">polygonal</span><span class="p">.</span><span class="nx">ds</span><span class="p">.</span><span class="o">*;</span>
    <span class="kd">import</span> <span class="nx">org</span><span class="p">.</span><span class="nx">papervision3d</span><span class="p">.</span><span class="nx">cameras</span><span class="p">.</span><span class="o">*;</span>
    <span class="kd">import</span> <span class="nx">org</span><span class="p">.</span><span class="nx">papervision3d</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="o">*;</span>
    <span class="kd">import</span> <span class="nx">org</span><span class="p">.</span><span class="nx">papervision3d</span><span class="p">.</span><span class="nx">materials</span><span class="p">.</span><span class="o">*;</span>
    <span class="kd">import</span> <span class="nx">org</span><span class="p">.</span><span class="nx">papervision3d</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="o">*;</span>
    <span class="kd">import</span> <span class="nx">org</span><span class="p">.</span><span class="nx">papervision3d</span><span class="p">.</span><span class="nx">scenes</span><span class="p">.</span><span class="o">*;</span>

    <span class="c1">//import org.papervision3d.components.as3.utils.ObjectController;</span>

    <span class="kd">public</span> <span class="kd">class</span> <span class="nx">Main</span> <span class="kd">extends</span> <span class="nb">Sprite</span> <span class="p">{</span>
        <span class="c1">// Sizing</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">k_nodeRadius</span><span class="o">:</span><span class="nb">int</span>  <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">k_nodeHeight</span><span class="o">:</span><span class="nb">int</span>  <span class="o">=</span> <span class="mi">36</span><span class="o">;</span> <span class="c1">// 0.34*21*radius/2</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">k_gridWidth</span><span class="o">:</span><span class="nb">int</span>   <span class="o">=</span> <span class="mi">26</span><span class="o">;</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">k_gridHeight</span><span class="o">:</span><span class="nb">int</span>  <span class="o">=</span> <span class="mi">26</span><span class="o">;</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">k_gridSpacing</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="nx">k_nodeRadius</span> <span class="o">*</span> <span class="mi">2</span><span class="o">;</span>

        <span class="c1">// Node</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">graph</span><span class="o">:</span><span class="nx">Graph</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">grid</span><span class="o">:</span><span class="nx">Array2</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">nodeCanvas</span><span class="o">:</span><span class="nb">Sprite</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">nodeNumbers</span><span class="o">:</span><span class="nx">LinkedStack</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">nodeCount</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="c1">// Path</span>

        <span class="c1">// 3D render</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">container</span><span class="o">:</span><span class="nb">Sprite</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">scene</span><span class="o">:</span><span class="nx">Scene3D</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">camera</span><span class="o">:</span><span class="nx">Camera3D</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">rootNode</span><span class="o">:</span><span class="nx">DisplayObject3D</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">cylinderList</span><span class="o">:</span><span class="nb">Array</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">angle</span><span class="o">:</span><span class="nb">Number</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">camera_x_offset</span><span class="o">:</span><span class="nb">int</span>  <span class="o">=</span> <span class="mi">150</span><span class="o">;</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">camera_y_offset</span><span class="o">:</span><span class="nb">int</span>  <span class="o">=</span> <span class="mi">260</span><span class="o">;</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">camera_z_offset</span><span class="o">:</span><span class="nb">int</span>  <span class="o">=</span> <span class="nx">k_nodeHeight</span><span class="o">/</span><span class="mi">2</span><span class="o">;</span>

        <span class="c1">// Misc</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="k">var</span> <span class="nx">MyriadProFont</span><span class="o">:</span><span class="nb">Font</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyriadPro</span><span class="p">();</span>

        <span class="kd">public</span> <span class="kd">function</span> <span class="nx">Main</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">configureListeners</span><span class="p">();</span>
            <span class="nx">stage</span><span class="p">.</span><span class="nx">quality</span> <span class="o">=</span> <span class="s2">&quot;HIGH&quot;</span><span class="o">;</span>
            <span class="nx">stage</span><span class="p">.</span><span class="nx">scaleMode</span> <span class="o">=</span> <span class="nb">StageScaleMode</span><span class="p">.</span><span class="nx">NO_SCALE</span><span class="o">;</span>
            <span class="nx">stage</span><span class="p">.</span><span class="nx">align</span> <span class="o">=</span> <span class="nb">StageAlign</span><span class="p">.</span><span class="nx">TOP_LEFT</span><span class="o">;</span>

            <span class="c1">// 3D stuff</span>
            <span class="nx">cylinderList</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">();</span>

            <span class="c1">// Creates scene</span>
            <span class="nx">container</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Sprite</span><span class="p">();</span>
            <span class="nx">container</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">150</span><span class="o">;</span>
            <span class="nx">container</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">20</span><span class="o">;</span>
            <span class="nx">renderPanel</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">container</span><span class="p">);</span>
            <span class="nx">scene</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Scene3D</span><span class="p">(</span><span class="nx">container</span><span class="p">);</span>
            <span class="nx">rootNode</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DisplayObject3D</span><span class="p">(</span><span class="s2">&quot;rootNode&quot;</span><span class="p">);</span>
            <span class="nx">scene</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">rootNode</span><span class="p">);</span>

            <span class="c1">// Creates cameras</span>
            <span class="nx">camera</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Camera3D</span><span class="p">();</span>
            <span class="nx">camera</span><span class="p">.</span><span class="nx">zoom</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>
            <span class="nx">camera</span><span class="p">.</span><span class="nx">focus</span> <span class="o">=</span> <span class="mi">200</span><span class="o">;</span>
            <span class="nx">camera</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="nx">camera_z_offset</span><span class="o">;</span>
            <span class="nx">addEventListener</span><span class="p">(</span><span class="nb">Event</span><span class="p">.</span><span class="nx">ENTER_FRAME</span><span class="o">,</span> <span class="nx">tick</span><span class="p">);</span>

            <span class="c1">// Creates 2D slice grid</span>
            <span class="nx">grid</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Array2</span><span class="p">(</span><span class="nx">k_gridWidth</span><span class="o">,</span> <span class="nx">k_gridHeight</span><span class="p">);</span>
            <span class="nx">graph</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Graph</span><span class="p">(</span><span class="nx">grid</span><span class="p">.</span><span class="nx">size</span><span class="p">);</span>
            <span class="nx">Node</span><span class="p">.</span><span class="nx">RADIUS</span> <span class="o">=</span> <span class="nx">k_nodeRadius</span><span class="o">;</span>
            <span class="nx">slicePanel</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">nodeCanvas</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Sprite</span><span class="p">());</span>
            <span class="nx">nodeCanvas</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">nodeCanvas</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">k_nodeRadius</span> <span class="o">*</span> <span class="mi">2</span><span class="o">;</span>
            <span class="nx">nodeNumbers</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">LinkedStack</span><span class="p">();</span>

            <span class="c1">// Add a mask for slicePanel</span>
            <span class="k">var</span> <span class="nx">rect</span><span class="o">:</span><span class="nb">Shape</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Shape</span><span class="p">();</span>
            <span class="nx">rect</span><span class="p">.</span><span class="nx">graphics</span><span class="p">.</span><span class="nx">lineStyle</span><span class="p">(</span><span class="mi">1</span><span class="o">,</span> <span class="mh">0x000000</span><span class="p">);</span>
            <span class="nx">rect</span><span class="p">.</span><span class="nx">graphics</span><span class="p">.</span><span class="nx">beginFill</span><span class="p">(</span><span class="mh">0xff0000</span><span class="p">);</span>
            <span class="nx">rect</span><span class="p">.</span><span class="nx">graphics</span><span class="p">.</span><span class="nx">drawRect</span><span class="p">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">310</span><span class="o">,</span> <span class="mi">570</span><span class="p">);</span>
            <span class="nx">rect</span><span class="p">.</span><span class="nx">graphics</span><span class="p">.</span><span class="nx">endFill</span><span class="p">();</span>
            <span class="nx">slicePanel</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">rect</span><span class="p">);</span>
            <span class="nx">nodeCanvas</span><span class="p">.</span><span class="nx">mask</span> <span class="o">=</span> <span class="nx">rect</span><span class="o">;</span>

            <span class="nx">nodeCanvas</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">100</span><span class="o">;</span>
            <span class="nx">nodeCanvas</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">100</span><span class="o">;</span>
            <span class="nx">nodeCanvas</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nb">MouseEvent</span><span class="p">.</span><span class="nx">MOUSE_DOWN</span><span class="o">,</span> <span class="nx">mouseDown</span><span class="p">)</span>
            <span class="nx">nodeCanvas</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nb">MouseEvent</span><span class="p">.</span><span class="nx">MOUSE_UP</span><span class="o">,</span> <span class="nx">mouseReleased</span><span class="p">);</span>

            <span class="c1">//create rectangular array of nodes</span>
            <span class="k">var</span> <span class="nx">i</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">node</span><span class="o">:</span><span class="nx">Node</span><span class="o">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="k">var</span> <span class="nx">y</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">grid</span><span class="p">.</span><span class="nx">height</span><span class="o">;</span> <span class="nx">y</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="k">var</span> <span class="nx">x</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">grid</span><span class="p">.</span><span class="nx">width</span><span class="o">;</span> <span class="nx">x</span><span class="o">++</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="nx">node</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Node</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
                    <span class="nx">nodeCanvas</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>

                    <span class="k">if</span> <span class="p">((</span><span class="nx">x</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="nx">y</span> <span class="o">%</span> <span class="mi">2</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">node</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="o">*</span><span class="nx">k_nodeRadius</span><span class="o">*</span><span class="mi">3</span><span class="o">*</span><span class="mf">1.05</span> <span class="o">+</span> <span class="nx">k_nodeRadius</span><span class="o">;</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">node</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="o">*</span><span class="nx">k_nodeRadius</span><span class="o">*</span><span class="mi">3</span><span class="o">*</span><span class="mf">1.05</span><span class="o">;</span>
                    <span class="p">}</span>
                    <span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="o">*</span><span class="nx">k_nodeRadius</span><span class="o">*</span><span class="mf">1.7320</span><span class="o">*</span><span class="mf">1.1</span>

                    <span class="k">var</span> <span class="nx">tf</span><span class="o">:</span><span class="nb">TextField</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">getChildAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="nx">as</span> <span class="nb">TextField</span><span class="o">;</span>
                    <span class="k">var</span> <span class="nx">tfm</span><span class="o">:</span><span class="nb">TextFormat</span> <span class="o">=</span> <span class="nx">tf</span><span class="p">.</span><span class="nx">getTextFormat</span><span class="p">();</span>
                    <span class="nx">tfm</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="mi">14</span><span class="o">;</span>
                    <span class="nx">tf</span><span class="p">.</span><span class="nx">defaultTextFormat</span> <span class="o">=</span> <span class="nx">tfm</span><span class="o">;</span>

                    <span class="nx">graph</span><span class="p">.</span><span class="nx">addNode</span><span class="p">(</span><span class="nx">node</span><span class="o">,</span> <span class="nx">i</span><span class="p">);</span>

                    <span class="nx">grid</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">x</span><span class="o">,</span> <span class="nx">y</span><span class="o">,</span> <span class="nx">node</span><span class="p">);</span>
                    <span class="nx">i</span><span class="o">++;</span>

                    <span class="nx">node</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nb">MouseEvent</span><span class="p">.</span><span class="nx">MOUSE_MOVE</span><span class="o">,</span> <span class="nx">onMove</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="mi">1000</span><span class="p">);</span>
                    <span class="nx">node</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nb">MouseEvent</span><span class="p">.</span><span class="nx">MOUSE_OUT</span><span class="o">,</span>  <span class="nx">onMouseOut</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="mi">1000</span><span class="p">);</span>
                    <span class="nx">node</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nb">MouseEvent</span><span class="p">.</span><span class="nx">CLICK</span><span class="o">,</span> <span class="nx">onClick</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="mi">1000</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">mouseDown</span><span class="p">(</span><span class="nx">event</span><span class="o">:</span><span class="nb">MouseEvent</span><span class="p">)</span><span class="o">:</span><span class="nx">void</span> <span class="p">{</span>
            <span class="nx">nodeCanvas</span><span class="p">.</span><span class="nx">startDrag</span><span class="p">();</span>
        <span class="p">}</span>


        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">mouseReleased</span><span class="p">(</span><span class="nx">event</span><span class="o">:</span><span class="nb">MouseEvent</span><span class="p">)</span><span class="o">:</span><span class="nx">void</span> <span class="p">{</span>
            <span class="nx">nodeCanvas</span><span class="p">.</span><span class="nx">stopDrag</span><span class="p">();</span>
        <span class="p">}</span>


        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">addCylinder</span><span class="p">(</span><span class="nx">p_x</span><span class="o">:</span><span class="nb">Number</span><span class="o">,</span> <span class="nx">p_y</span><span class="o">:</span><span class="nb">Number</span><span class="o">,</span> <span class="nx">p_z</span><span class="o">:</span><span class="nb">Number</span><span class="p">)</span><span class="o">:</span><span class="nx">void</span> <span class="p">{</span>
            <span class="k">var</span> <span class="nx">cylinderIndex</span><span class="o">:</span><span class="nb">uint</span> <span class="o">=</span> <span class="nx">cylinderList</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">newCylinderMaterial</span><span class="o">:</span><span class="nx">CompositeMaterial</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CompositeMaterial</span><span class="p">()</span>
            <span class="nx">newCylinderMaterial</span><span class="p">.</span><span class="nx">addMaterial</span><span class="p">(</span><span class="k">new</span> <span class="nx">ColorMaterial</span><span class="p">(</span><span class="mh">0x03a3f0</span><span class="p">));</span>
            <span class="nx">newCylinderMaterial</span><span class="p">.</span><span class="nx">addMaterial</span><span class="p">(</span><span class="k">new</span> <span class="nx">WireframeMaterial</span><span class="p">(</span><span class="mh">0x000000</span><span class="p">));</span>
            <span class="k">var</span> <span class="nx">newCylinder</span><span class="o">:</span><span class="nx">Cylinder</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cylinder</span><span class="p">(</span><span class="nx">newCylinderMaterial</span><span class="o">,</span> <span class="nx">k_nodeRadius</span><span class="o">+</span><span class="mi">2</span><span class="o">,</span> <span class="nx">k_nodeHeight</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="kc">null</span><span class="p">);</span>
            <span class="nx">newCylinder</span><span class="p">.</span><span class="nx">rotationX</span> <span class="o">=</span> <span class="mi">90</span><span class="o">;</span>
            <span class="nx">rootNode</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">newCylinder</span><span class="p">);</span>
            <span class="nx">cylinderList</span><span class="p">[</span><span class="nx">cylinderIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">newCylinder</span><span class="o">;</span>
            <span class="nx">newCylinder</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">p_x</span><span class="o">;</span>
            <span class="nx">newCylinder</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">p_y</span><span class="o">;</span>
            <span class="nx">newCylinder</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="nx">p_z</span><span class="o">;</span>
        <span class="p">}</span>

        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">tick</span><span class="p">(</span><span class="nx">event</span><span class="o">:</span><span class="nb">Event</span><span class="p">)</span><span class="o">:</span><span class="nx">void</span> <span class="p">{</span>
            <span class="c1">// A tick of the engine</span>
            <span class="nx">camera</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">angle</span><span class="p">)</span><span class="o">*</span><span class="mi">750</span> <span class="o">+</span> <span class="nx">camera_x_offset</span><span class="p">);</span>
            <span class="nx">camera</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">angle</span><span class="p">)</span><span class="o">*</span><span class="mi">750</span> <span class="o">+</span> <span class="nx">camera_z_offset</span><span class="p">);</span>
            <span class="nx">angle</span> <span class="o">+=</span> <span class="mf">0.03</span><span class="o">;</span>
            <span class="nx">scene</span><span class="p">.</span><span class="nx">renderCamera</span><span class="p">(</span><span class="nx">camera</span><span class="p">);</span>
            <span class="nx">basePanel</span><span class="p">.</span><span class="nx">renderText</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="s2">&quot;cam.x: &quot;</span> <span class="o">+</span> <span class="nx">camera</span><span class="p">.</span><span class="nx">z</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">+</span>
                                        <span class="s2">&quot;  cam.z: &quot;</span> <span class="o">+</span> <span class="nx">camera</span><span class="p">.</span><span class="nx">z</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">configureListeners</span><span class="p">()</span><span class="o">:</span><span class="nx">void</span> <span class="p">{</span>
            <span class="nx">basePanel</span><span class="p">.</span><span class="nx">zoomslider</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">SliderEvent</span><span class="p">.</span><span class="nx">CHANGE</span><span class="o">,</span> <span class="nx">sliderChanged</span><span class="p">);</span>
            <span class="nx">basePanel</span><span class="p">.</span><span class="nx">zoomslider</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">SliderEvent</span><span class="p">.</span><span class="nx">THUMB_RELEASE</span><span class="o">,</span> <span class="nx">sliderRelease</span><span class="p">);</span>
            <span class="nx">basePanel</span><span class="p">.</span><span class="nx">focusslider</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">SliderEvent</span><span class="p">.</span><span class="nx">CHANGE</span><span class="o">,</span> <span class="nx">focussliderChanged</span><span class="p">);</span>
            <span class="nx">basePanel</span><span class="p">.</span><span class="nx">focusslider</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">SliderEvent</span><span class="p">.</span><span class="nx">THUMB_RELEASE</span><span class="o">,</span> <span class="nx">foucssliderRelease</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">sliderRelease</span><span class="p">(</span><span class="nx">e</span><span class="o">:</span><span class="nx">SliderEvent</span><span class="p">)</span><span class="o">:</span><span class="nx">void</span> <span class="p">{</span>
            <span class="nx">camera</span><span class="p">.</span><span class="nx">zoom</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="o">;</span>
        <span class="p">}</span>

        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">sliderChanged</span><span class="p">(</span><span class="nx">e</span><span class="o">:</span><span class="nx">SliderEvent</span><span class="p">)</span><span class="o">:</span><span class="nx">void</span> <span class="p">{</span>
            <span class="nx">basePanel</span><span class="p">.</span><span class="nx">zoomsliderLabel</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span>  <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="o">;</span>
        <span class="p">}</span>
        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">foucssliderRelease</span><span class="p">(</span><span class="nx">e</span><span class="o">:</span><span class="nx">SliderEvent</span><span class="p">)</span><span class="o">:</span><span class="nx">void</span> <span class="p">{</span>
            <span class="nx">camera</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="o">;</span>
        <span class="p">}</span>

        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">focussliderChanged</span><span class="p">(</span><span class="nx">e</span><span class="o">:</span><span class="nx">SliderEvent</span><span class="p">)</span><span class="o">:</span><span class="nx">void</span> <span class="p">{</span>
            <span class="nx">basePanel</span><span class="p">.</span><span class="nx">focussliderLabel</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span>  <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="o">;</span>
        <span class="p">}</span>

        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">onClick</span><span class="p">(</span><span class="nx">e</span><span class="o">:</span><span class="nb">MouseEvent</span><span class="p">)</span><span class="o">:</span><span class="nx">void</span>
        <span class="p">{</span>
            <span class="c1">// check if target is marked</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">marked</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// check if pairedNeighbor is marked</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">pairedNeighbor</span><span class="p">.</span><span class="nx">marked</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">var</span> <span class="nx">a</span><span class="o">:</span><span class="nb">Array</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">();</span>
                    <span class="c1">// unmark and recover numbers</span>
                    <span class="nx">a</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">unmark</span><span class="p">());</span>
                    <span class="nx">a</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">pairedNeighbor</span><span class="p">.</span><span class="nx">unmark</span><span class="p">());</span>
                    <span class="nx">a</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span>
                    <span class="nx">nodeNumbers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
                    <span class="nx">nodeNumbers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

                    <span class="c1">// unpair</span>
                    <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">neighbor</span><span class="p">.</span><span class="nx">pairedNeighbor</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
                    <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">pairedNeighbor</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">marked</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// target is unmarked</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">neighbor</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span><span class="o">;</span> <span class="c1">// return if no neighbors</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">neighbor</span><span class="p">.</span><span class="nx">marked</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// if neighbor is unmarked</span>
                    <span class="k">var</span> <span class="nx">parity</span><span class="o">:</span><span class="nb">int</span><span class="o">;</span>
                    <span class="nx">parity</span> <span class="o">=</span> <span class="nx">getNodeParity</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>

                    <span class="c1">//var s:int = nodeNumbers.size();</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">nodeNumbers</span><span class="p">.</span><span class="nx">peek</span><span class="p">()</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">nodeNumbers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">nodeCount</span><span class="p">);</span>
                        <span class="nx">nodeCount</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
                        <span class="nx">nodeNumbers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">nodeCount</span><span class="p">);</span>
                        <span class="nx">nodeCount</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
                    <span class="p">}</span>

                    <span class="k">var</span> <span class="nx">odd</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="nx">nodeNumbers</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
                    <span class="k">var</span> <span class="nx">even</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="nx">nodeNumbers</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
                    <span class="c1">// mark nodes</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">parity</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">neighbor</span><span class="p">.</span><span class="nx">mark</span><span class="p">(</span><span class="nx">even</span><span class="p">);</span>
                        <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">mark</span><span class="p">(</span><span class="nx">odd</span><span class="p">);</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">mark</span><span class="p">(</span><span class="nx">even</span><span class="p">);</span>
                        <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">neighbor</span><span class="p">.</span><span class="nx">mark</span><span class="p">(</span><span class="nx">odd</span><span class="p">);</span>
                    <span class="p">}</span>

                    <span class="c1">// pair nodes</span>
                    <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">pairedNeighbor</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">neighbor</span><span class="o">;</span>
                    <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">neighbor</span><span class="p">.</span><span class="nx">pairedNeighbor</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="o">;</span>

                    <span class="c1">// Path update</span>


                    <span class="c1">// 3D render</span>
                    <span class="nx">addCylinder</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">x</span><span class="o">,</span> <span class="o">-</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">y</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
                    <span class="nx">addCylinder</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">neighbor</span><span class="p">.</span><span class="nx">x</span><span class="o">,</span> <span class="o">-</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">neighbor</span><span class="p">.</span><span class="nx">y</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
                    <span class="nx">centerXY</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">getDist</span><span class="p">(</span><span class="nx">x1</span><span class="o">:</span><span class="nb">int</span><span class="o">,</span><span class="nx">x2</span><span class="o">:</span><span class="nb">int</span><span class="o">,</span><span class="nx">y1</span><span class="o">:</span><span class="nb">int</span><span class="o">,</span><span class="nx">y2</span><span class="o">:</span><span class="nb">int</span><span class="p">)</span><span class="o">:</span><span class="nb">int</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">x1</span><span class="o">-</span><span class="nx">x2</span><span class="o">,</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">y1</span><span class="o">-</span><span class="nx">y2</span><span class="o">,</span><span class="mi">2</span><span class="p">));</span>
        <span class="p">}</span>

        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">centerXY</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">var</span> <span class="nx">n</span><span class="o">:</span><span class="nx">Node</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">maxX</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">maxY</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">minX</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">9999</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">minY</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">9999</span><span class="o">;</span>

            <span class="k">var</span> <span class="nx">midX</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">midY</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

            <span class="k">for</span> <span class="p">(</span><span class="k">var</span> <span class="nx">row</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">row</span> <span class="o">&lt;</span> <span class="nx">grid</span><span class="p">.</span><span class="nx">height</span><span class="o">;</span> <span class="nx">row</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="k">var</span> <span class="nx">col</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">col</span> <span class="o">&lt;</span> <span class="nx">grid</span><span class="p">.</span><span class="nx">width</span><span class="o">;</span> <span class="nx">col</span><span class="o">++</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="nx">n</span> <span class="o">=</span> <span class="nx">grid</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">col</span><span class="o">,</span> <span class="nx">row</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">n</span><span class="p">.</span><span class="nx">marked</span><span class="p">)</span> <span class="k">continue</span><span class="o">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="nx">maxX</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">x</span><span class="o">;</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">minX</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">minX</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">x</span><span class="o">;</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">y</span> <span class="o">&gt;</span> <span class="nx">maxY</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">y</span><span class="o">;</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">minY</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">minY</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">y</span><span class="o">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">midX</span> <span class="o">=</span> <span class="p">(</span><span class="nx">maxX</span><span class="o">+</span><span class="nx">minX</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="o">;</span>
            <span class="nx">midY</span> <span class="o">=</span> <span class="p">(</span><span class="nx">maxY</span><span class="o">+</span><span class="nx">minY</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="o">;</span>
            <span class="nx">camera</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">midX</span><span class="o">;</span>
            <span class="nx">camera</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">midY</span> <span class="o">-</span> <span class="nx">camera_y_offset</span><span class="p">);</span>
            <span class="nx">camera</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">midY</span><span class="o">-</span><span class="nx">camera_y_offset</span><span class="p">);</span>
            <span class="nf">trace</span><span class="p">(</span><span class="nx">camera</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">getNodeParity</span><span class="p">(</span><span class="nx">n</span><span class="o">:</span><span class="nb">Object</span><span class="p">)</span><span class="o">:</span><span class="nb">int</span>
        <span class="p">{</span>
            <span class="k">var</span> <span class="nx">rowcol</span><span class="o">:</span><span class="nb">Array</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">var</span> <span class="nx">row</span><span class="o">:</span><span class="nb">int</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">col</span><span class="o">:</span><span class="nb">int</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">parity</span><span class="o">:</span><span class="nb">int</span><span class="o">;</span>
            <span class="nx">rowcol</span> <span class="o">=</span> <span class="nx">grid</span><span class="p">.</span><span class="nx">rowcolIndex</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span> <span class="c1">// get (x,y) coords of node</span>
            <span class="nx">row</span> <span class="o">=</span> <span class="nx">rowcol</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">col</span> <span class="o">=</span> <span class="nx">rowcol</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nx">parity</span> <span class="o">=</span> <span class="p">(</span><span class="nx">row</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="nx">col</span> <span class="o">%</span> <span class="mi">2</span><span class="p">);</span> <span class="c1">// get parity</span>
            <span class="k">return</span> <span class="nx">parity</span><span class="o">;</span>
        <span class="p">}</span>

        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">getRowColParity</span><span class="p">(</span><span class="nx">row</span><span class="o">:</span><span class="nb">int</span><span class="o">,</span> <span class="nx">col</span><span class="o">:</span><span class="nb">int</span><span class="p">)</span><span class="o">:</span><span class="nb">int</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">row</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="nx">col</span> <span class="o">%</span> <span class="mi">2</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">getRowCol</span><span class="p">(</span><span class="nx">n</span><span class="o">:</span><span class="nb">Object</span><span class="p">)</span><span class="o">:</span><span class="nb">Array</span>
        <span class="p">{</span>
            <span class="k">var</span> <span class="nx">rowcol</span><span class="o">:</span><span class="nb">Array</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="nx">rowcol</span> <span class="o">=</span> <span class="nx">grid</span><span class="p">.</span><span class="nx">rowcolIndex</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">rowcol</span>
        <span class="p">}</span>

        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">onMouseOut</span><span class="p">(</span><span class="nx">e</span><span class="o">:</span><span class="nb">MouseEvent</span><span class="p">)</span><span class="o">:</span><span class="nx">void</span>
        <span class="p">{</span>
            <span class="k">var</span> <span class="nx">neighbors</span><span class="o">:</span><span class="nb">Array</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">();</span>
            <span class="k">var</span> <span class="nx">rowcol</span><span class="o">:</span><span class="nb">Array</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">row</span><span class="o">:</span><span class="nb">int</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">col</span><span class="o">:</span><span class="nb">int</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">parity</span><span class="o">:</span><span class="nb">int</span><span class="o">;</span>
            <span class="nx">rowcol</span> <span class="o">=</span> <span class="nx">getRowCol</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
            <span class="nx">row</span> <span class="o">=</span> <span class="nx">rowcol</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">col</span> <span class="o">=</span> <span class="nx">rowcol</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="nx">parity</span> <span class="o">=</span> <span class="nx">getRowColParity</span><span class="p">(</span><span class="nx">row</span><span class="o">,</span> <span class="nx">col</span><span class="p">);</span>

            <span class="c1">// get row + 1 if valid</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">row</span> <span class="o">&lt;</span> <span class="nx">k_gridWidth</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">neighbors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">grid</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">row</span><span class="o">+</span><span class="mi">1</span><span class="o">,</span><span class="nx">col</span><span class="p">));</span>
            <span class="p">}</span>

            <span class="c1">// get row - 1 if valid</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">row</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">neighbors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">grid</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">row</span><span class="o">-</span><span class="mi">1</span><span class="o">,</span><span class="nx">col</span><span class="p">));</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">parity</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// get col + 1 if valid</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">col</span> <span class="o">&lt;</span> <span class="nx">k_gridHeight</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">neighbors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">grid</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">row</span><span class="o">,</span><span class="nx">col</span><span class="o">+</span><span class="mi">1</span><span class="p">));</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// get col+1 if valid</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">col</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">neighbors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">grid</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">row</span><span class="o">,</span><span class="nx">col</span><span class="o">-</span><span class="mi">1</span><span class="p">));</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">var</span> <span class="nx">i</span><span class="o">:</span><span class="nb">int</span><span class="o">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">neighbors</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">neighbors</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">unhover</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">unhover</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">onMove</span><span class="p">(</span><span class="nx">e</span><span class="o">:</span><span class="nb">MouseEvent</span><span class="p">)</span><span class="o">:</span><span class="nx">void</span>
        <span class="p">{</span>
            <span class="k">var</span> <span class="nx">x</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">x</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">y</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">y</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">row</span><span class="o">:</span><span class="nb">int</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">col</span><span class="o">:</span><span class="nb">int</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">rowcol</span><span class="o">:</span><span class="nb">Array</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">var</span> <span class="nx">parity</span><span class="o">:</span><span class="nb">int</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">dist</span><span class="o">:</span><span class="nb">int</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">minDist</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">9999</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">neighbor</span><span class="o">:</span><span class="nx">Node</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">pairedNeighbor</span><span class="o">:</span><span class="nx">Node</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">nearestNeighbor</span><span class="o">:</span><span class="nx">Node</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">neighbors</span><span class="o">:</span><span class="nb">Array</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">();</span>
            <span class="k">var</span> <span class="nx">nearestNeighborIndex</span><span class="o">:</span><span class="nb">int</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">info</span><span class="o">:</span><span class="nb">String</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">;</span>

            <span class="nx">rowcol</span> <span class="o">=</span> <span class="nx">getRowCol</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
            <span class="nx">row</span> <span class="o">=</span> <span class="nx">rowcol</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">col</span> <span class="o">=</span> <span class="nx">rowcol</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nx">parity</span> <span class="o">=</span> <span class="nx">getRowColParity</span><span class="p">(</span><span class="nx">row</span><span class="o">,</span> <span class="nx">col</span><span class="p">);</span>

            <span class="nx">info</span> <span class="o">+=</span> <span class="s2">&quot;mouse:&quot;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">stageX</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">stageY</span> <span class="o">+</span> <span class="s2">&quot;\n&quot;</span><span class="o">;</span>
            <span class="nx">info</span> <span class="o">+=</span> <span class="s2">&quot;node &quot;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">graphIndex</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nx">x</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">y</span> <span class="o">+</span> <span class="s2">&quot;\n&quot;</span><span class="o">;</span>
            <span class="nx">info</span> <span class="o">+=</span> <span class="s2">&quot;marked: &quot;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">marked</span> <span class="o">+</span> <span class="s2">&quot;\n&quot;</span><span class="o">;</span>
            <span class="nx">info</span> <span class="o">+=</span> <span class="s2">&quot;neighbor: &quot;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">neighbor</span> <span class="o">+</span>  <span class="s2">&quot;\n&quot;</span><span class="o">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">pairedNeighbor</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">pairedNeighbor</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">pairedNeighbor</span><span class="o">;</span>
                <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">pairedhover</span><span class="p">();</span>
                <span class="nx">pairedNeighbor</span><span class="p">.</span><span class="nx">pairedhover</span><span class="p">();</span>
                <span class="nx">basePanel</span><span class="p">.</span><span class="nx">sliceText</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">info</span><span class="o">;</span>
                <span class="k">return</span><span class="o">;</span>
            <span class="p">}</span>

            <span class="c1">// get row + 1 if valid</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">row</span> <span class="o">&lt;</span> <span class="nx">k_gridWidth</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">neighbor</span> <span class="o">=</span> <span class="nx">grid</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">row</span><span class="o">+</span><span class="mi">1</span><span class="o">,</span><span class="nx">col</span><span class="p">)</span>
                <span class="nx">neighbors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">neighbor</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="c1">// get row - 1 if valid</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">row</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">neighbor</span> <span class="o">=</span> <span class="nx">grid</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">row</span><span class="o">-</span><span class="mi">1</span><span class="o">,</span><span class="nx">col</span><span class="p">)</span>
                <span class="nx">neighbors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">neighbor</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">parity</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// get col + 1 if valid</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">col</span> <span class="o">&lt;</span> <span class="nx">k_gridHeight</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">neighbor</span> <span class="o">=</span> <span class="nx">grid</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">row</span><span class="o">,</span><span class="nx">col</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                    <span class="nx">neighbors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">neighbor</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// get col+1 if valid</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">col</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">neighbor</span> <span class="o">=</span> <span class="nx">grid</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">row</span><span class="o">,</span><span class="nx">col</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                    <span class="nx">neighbors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">neighbor</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">var</span> <span class="nx">i</span><span class="o">:</span><span class="nb">int</span><span class="o">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">neighbors</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">neighbors</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">dist</span> <span class="o">=</span> <span class="nx">getDist</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">stageX</span><span class="o">,</span><span class="nx">neighbors</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">x</span><span class="o">+</span><span class="mi">20</span><span class="o">,</span>
                                   <span class="nx">e</span><span class="p">.</span><span class="nx">stageY</span><span class="o">,</span><span class="nx">neighbors</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">y</span><span class="o">+</span><span class="mi">20</span><span class="p">);</span>
                    <span class="nx">info</span> <span class="o">+=</span> <span class="s2">&quot;[&quot;</span> <span class="o">+</span> <span class="nx">neighbors</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">graphIndex</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span>
                            <span class="nx">dist</span> <span class="o">+</span> <span class="s2">&quot;] &quot;</span><span class="o">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">neighbors</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">pairedNeighbor</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">continue</span><span class="o">;</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">dist</span> <span class="o">&lt;</span> <span class="nx">minDist</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">minDist</span> <span class="o">=</span> <span class="nx">dist</span><span class="o">;</span>
                        <span class="nx">nearestNeighborIndex</span> <span class="o">=</span> <span class="nx">i</span><span class="o">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="nx">nearestNeighbor</span> <span class="o">=</span> <span class="nx">neighbors</span><span class="p">[</span><span class="nx">nearestNeighborIndex</span><span class="p">]</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">nearestNeighbor</span> <span class="o">==</span> <span class="nx">pairedNeighbor</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">nearestNeighbor</span><span class="p">.</span><span class="nx">pairedhover</span><span class="p">();</span>
                    <span class="nx">neighbors</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">nearestNeighborIndex</span><span class="o">,</span><span class="mi">1</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">nearestNeighbor</span><span class="p">.</span><span class="nx">pairedNeighbor</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span><span class="o">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">nearestNeighbor</span><span class="p">.</span><span class="nx">hover</span><span class="p">();</span>
                    <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">neighbor</span> <span class="o">=</span> <span class="nx">nearestNeighbor</span><span class="o">;</span>
                    <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">neighbor</span><span class="p">.</span><span class="nx">neighbor</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="o">;</span>
                    <span class="nx">neighbors</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">nearestNeighborIndex</span><span class="o">,</span><span class="mi">1</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">neighbors</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="nx">neighbors</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">unhover</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="nx">basePanel</span><span class="p">.</span><span class="nx">sliceText</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">info</span><span class="o">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

  

</div> <!-- end class log-entry -->



<div class="row">
  <div class="one column"></div>
  <div class="two columns"><!-- Attachments: --></div>
<div class="nine columns">
    
      
        <a href="../../../../../log/2007/08/08/cadnano/dragging.png"><img src="../../../../../log/2007/08/08/cadnano/dragging@100.png"></a>
      
    
    <br/>
    
        <a class="inactive" ref="../../../../../log/2007/08/08/cadnano/">Main.as</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

        ,
    
        <a class="inactive" ref="../../../../../log/2007/08/08/cadnano/">cadnano.swf</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

        ,
    
        <a class="inactive" ref="../../../../../log/2007/08/08/cadnano/">flashnano.zip</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <i class="fa fa-file-archive-o"></i>

        
    
  </div>
</div>




<hr style="margin-top:2em;">
<div class="row">
<div class="one column"></div>
  <div class="nine columns">
    
    <div class="category">folder: <a href="/folders/cadnano"><span class="orange3">cadnano/</span></a></div>
    
    <div class="category">tags: None (<a href="/admin/edit?path=../../../../../log/2007/08/08/cadnano/">+</a>)</div>
    
  </div>
  <div class="two columns">
    <span class="u-pull-right">
    
      by sdouglas
    
    </span>
  </div>
</div>



  </div>

  <footer>
    &copy; 2016. Made with <a target="_new" href="http://bionano.ucsf.edu/"><i class="fa fa-hand-lizard-o"></i></a> in SF.

  </footer>
</body>
